<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicaci칩n de An치lisis de Datos</title>
    
    <!-- Favicon (opcional) -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Estilos principales -->
    <link rel="stylesheet" href="styles/main.css">
    
    <!-- Precargar estilos de la vista de carga ya que es la primera vista -->
    <link rel="stylesheet" href="styles/upload.css" data-view-styles="upload">
    
    <!-- Bibliotecas externas para procesamiento de datos (CDN) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- Chart.js para gr치ficos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <!-- jsPDF para exportaci칩n -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- Cabecera con navegaci칩n -->
    <header>
        <div class="logo">
            <h1>DataApp</h1>
        </div>
        <nav>
            <ul id="main-nav">
                <li class="nav-item active" data-view="upload">Cargar datos</li>
                <li class="nav-item" data-view="analysis">An치lisis</li>
                <li class="nav-item" data-view="statistics">Estad칤sticas</li>
                <li class="nav-item" data-view="interactive">Gr치ficos Interactivos</li>
                <li class="nav-item" data-view="probabilistic">An치lisis Probabil칤stico</li>
                <li class="nav-item" data-view="settings">Configuraci칩n</li>
            </ul>
        </nav>
        
        <!-- Toggle de tema -->
        <div class="theme-toggle">
            <button id="theme-toggle-btn" class="theme-btn" title="Cambiar tema">
                游깿
            </button>
        </div>
    </header>

    <!-- Contenedor principal donde se cargar치n las vistas -->
    <main id="content-container">
        <!-- El contenido se cargar치 aqu칤 din치micamente -->
        <!-- Mostramos un mensaje de carga mientras se inicializa la aplicaci칩n -->
        <div class="loading-container">
            <p>Cargando aplicaci칩n...</p>
        </div>
    </main>

    <!-- Pie de p치gina -->
    <footer>
        <p>&copy; 2025 DataApp - Todos los derechos reservados</p>
    </footer>

    <!-- Scripts del sistema de navegaci칩n (desarrollado por tu compa침ero) -->
    <script src="scripts/navigation.js"></script>
    
    <!-- Scripts del sistema de carga y procesamiento de datos (tu parte) -->
    <script src="scripts/fileUploader.js"></script>
    <script src="scripts/urlLoader.js"></script>
    <script src="scripts/dataProcessor.js"></script>
    
    <!-- Scripts de Persona 3: Gr치ficos b치sicos -->
    <script src="scripts/ageChart.js"></script>
    <script src="scripts/locationChart.js"></script>
    <script src="scripts/additionalChart.js"></script>
    <script src="scripts/probabilisticAnalysis.js"></script>
    
    <!-- Scripts de Persona 4: Gr치ficos interactivos (comentados hasta que se creen) -->
    <!-- <script src="scripts/genderChart.js"></script> -->
    <!-- <script src="scripts/interactiveCharts.js"></script> -->
    
    <!-- Scripts de Persona 5: Integraci칩n y funcionalidades adicionales -->
    <script src="scripts/testData.js"></script>
    <!-- <script src="scripts/dataExport.js"></script> -->
    <!-- <script src="scripts/themeManager.js"></script> -->
    
    <script>
        // Inicializar la aplicaci칩n cuando el DOM est칠 listo
        document.addEventListener("DOMContentLoaded", () => {
            console.log("Aplicaci칩n inicializada");
            
            // Inicializar el tema manager
            if (window.ThemeManager) {
                window.ThemeManager.init();
            }
            
            // Verificar si existen las carpetas necesarias
            const requiredFolders = ['views', 'styles', 'scripts'];
            const missingFolders = checkFolders(requiredFolders);
            
            if (missingFolders.length > 0) {
                showFolderWarning(missingFolders);
            } else {
                // Cargar la vista de carga de datos por defecto
                setTimeout(() => {
                    loadView("upload");
                }, 300); // Peque침o retraso para mostrar la animaci칩n de carga
            }
        });
        
        // Funci칩n para verificar si existen las carpetas necesarias
        function checkFolders(folders) {
            // Esta es una simulaci칩n, ya que no podemos acceder directamente al sistema de archivos
            // En una aplicaci칩n real, esto requerir칤a un backend
            const missingFolders = [];
            
            // Si estamos en un entorno local (file://), asumamos que faltan
            if (window.location.protocol === 'file:') {
                return []; // Asumimos que est치n todas para no bloquear la aplicaci칩n
            }
            
            return missingFolders;
        }
        
        // Mostrar advertencia si faltan carpetas
        function showFolderWarning(missingFolders) {
            document.getElementById('content-container').innerHTML = `
                <div class="error-message">
                    <h2>Configuraci칩n incompleta</h2>
                    <p>Faltan algunas carpetas necesarias para el funcionamiento de la aplicaci칩n:</p>
                    <ul>
                        ${missingFolders.map(folder => `<li>${folder}</li>`).join('')}
                    </ul>
                    <p>Aseg칰rate de que la estructura del proyecto sea correcta.</p>
                </div>
            `;
        }
    </script>
</body>
</html>